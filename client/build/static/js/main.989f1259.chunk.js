(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{44:function(e,t,r){e.exports=r(95)},82:function(e,t,r){},84:function(e,t,r){},89:function(e,t,r){},91:function(e,t,r){},93:function(e,t,r){},95:function(e,t,r){"use strict";r.r(t);var a={};r.r(a),r.d(a,"setCurrentUser",function(){return N}),r.d(a,"currentUserUnset",function(){return w}),r.d(a,"userLogin",function(){return C}),r.d(a,"userCreate",function(){return S});var n={};r.r(n),r.d(n,"setAllBoards",function(){return x}),r.d(n,"getAllBoards",function(){return R}),r.d(n,"createBoard",function(){return T}),r.d(n,"removeBoard",function(){return _}),r.d(n,"allBoardsUnset",function(){return M});var c={};r.r(c),r.d(c,"setAllCards",function(){return P}),r.d(c,"getAllCards",function(){return G}),r.d(c,"createCard",function(){return L}),r.d(c,"createCardItem",function(){return q}),r.d(c,"removeCardItem",function(){return W});var o,s,u=r(0),i=r.n(u),l=r(37),d=r.n(l),m=r(7),p=r(20),f=r(40),h=r(17),b=r(2),v=r(11),O=r(3),g=r.n(O),j=r(15),E=r(16),y=r.n(E),N=Object(v.createAction)("set current user"),w=Object(v.createAction)("current user unset / logout user"),C=function(e){return function(){var t=Object(j.a)(g.a.mark(function t(r){var a;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.a.post("/users/login",e).then(function(e){localStorage.setItem("user",JSON.stringify(e.data)),r(N(e.data)),a={type:"sucess"}}).catch(function(e){a={type:"error",errorBody:"".concat(e)}});case 2:return t.sent,t.abrupt("return",a);case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},S=function(e){return function(){var t=Object(j.a)(g.a.mark(function t(r){var a;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.a.post("/users",e).then(function(e){localStorage.setItem("user",JSON.stringify(e.data)),r(N(e.data)),a={type:"sucess"}}).catch(function(e){a={type:"error",errorBody:"".concat(e)}});case 2:return t.sent,t.abrupt("return",a);case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},k={user:JSON.parse(localStorage.getItem("user")),userStatus:localStorage.getItem("user")?"sucess":"pending"},B=(o={},Object(h.a)(o,N,function(e,t){return Object(b.a)({},e,{user:t,userStatus:"success"})}),Object(h.a)(o,w,function(e,t){return Object(b.a)({},e,{user:null,userStatus:"pending"})}),o),I=Object(v.createReducer)(B,k),x=Object(v.createAction)("setting all boards"),R=function(){return function(){var e=Object(j.a)(g.a.mark(function e(t){var r,a;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=JSON.parse(localStorage.getItem("user")).token,e.next=3,y.a.post("/dashBoards",null,{headers:{Authorization:"Bearer "+a}}).then(function(e){t(x(e.data)),localStorage.setItem("boards",JSON.stringify(e.data))}).catch(function(e){r={type:"error",errorBody:"".concat(e)}});case 3:return e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},T=function(e){return function(){var t=Object(j.a)(g.a.mark(function t(r){var a;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.a.post("/dashBoards/create",e).then(function(e){r(R()),a={type:"sucess"}}).catch(function(e){a={type:"error",errorBody:"".concat(e)}});case 2:return t.sent,t.abrupt("return",a);case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},_=function(e){return function(){var t=Object(j.a)(g.a.mark(function t(r){var a;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.a.delete("/dashBoards/".concat(e)).then(function(e){r(R()),a={type:"sucess"}}).catch(function(e){a={type:"error",errorBody:"".concat(e)}});case 2:return t.sent,t.abrupt("return",a);case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},M=Object(v.createAction)("unset boards"),A={boards:JSON.parse(localStorage.getItem("boards")),boardsStatus:localStorage.getItem("boards")?"sucess":"pending"},J=(s={},Object(h.a)(s,x,function(e,t){return Object(b.a)({},e,{boards:t,boardsStatus:"success"})}),Object(h.a)(s,M,function(e,t){return Object(b.a)({},e,{boards:null,boardsStatus:"pending"})}),s),U=Object(v.createReducer)(J,A),P=Object(v.createAction)("setting all cards"),G=function(e){return function(){var t=Object(j.a)(g.a.mark(function t(r){var a;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.a.post("".concat(e,"/cards")).then(function(e){r(P(e.data)),localStorage.setItem("cards",JSON.stringify(e.data))}).catch(function(e){a={type:"error",errorBody:"".concat(e)}});case 2:return t.sent,t.abrupt("return",a);case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},L=function(e){return function(){var t=Object(j.a)(g.a.mark(function t(r){var a;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.a.post("".concat(e.boardTitle,"/cards/create"),{title:e.cardTitle}).then(function(t){r(G(e.boardTitle)),a={type:"sucess"}}).catch(function(e){a={type:"error",errorBody:"".concat(e)}});case 2:return t.sent,t.abrupt("return",a);case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},q=function(e){return function(){var t=Object(j.a)(g.a.mark(function t(r){var a;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.a.patch("".concat(e.boardTitle,"/cards/").concat(e.cardId,"/create"),{items:[{value:e.itemTitle}],id:e.cardId}).then(function(t){r(G(e.boardTitle)),a={type:"sucess"}}).catch(function(e){a={type:"error",errorBody:"".concat(e)}});case 2:return t.sent,t.abrupt("return",a);case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},W=function(e){return function(){var t=Object(j.a)(g.a.mark(function t(r){var a;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.a.delete("".concat(e.boardTitle,"/cards/").concat(e.cardId,"/").concat(e.itemId,"/remove")).then(function(t){r(G(e.boardTitle)),a={type:"sucess"}}).catch(function(e){a={type:"error",errorBody:"".concat(e)}});case 2:return t.sent,t.abrupt("return",a);case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},D={cards:JSON.parse(localStorage.getItem("cards")),cardsStatus:JSON.parse(localStorage.getItem("cards"))?"sucess":"pending"},z=Object(h.a)({},P,function(e,t){return Object(b.a)({},e,{cards:t,CardsStatus:"success"})}),F=Object(v.createReducer)(z,D),H=Object(p.c)({user:I,boards:U,cards:F}),K=Object(p.e)(H,Object(p.d)(Object(p.a)(f.a),window.devToolsExtension?window.devToolsExtension():function(e){return e})),Q=r(4),V=r(5),X=r(8),Y=r(6),Z=r(9),$=r(43),ee=r(98),te=r(101),re=function(e){function t(){return Object(Q.a)(this,t),Object(X.a)(this,Object(Y.a)(t).apply(this,arguments))}return Object(Z.a)(t,e),Object(V.a)(t,[{key:"render",value:function(){var e=this.props,t=e.component,r=e.state,a=e.to,n=Object($.a)(e,["component","state","to"]);return i.a.createElement("div",null,i.a.createElement(ee.a,Object.assign({},n,{render:function(e){return!r&&a?i.a.createElement(te.a,{to:a}):i.a.createElement(t,e)}})))}}]),t}(u.Component),ae=r(103),ne=r(100),ce=r(99),oe=r(21),se={homePage:"/",register:"/register",dashBoards:"/dashBoards",dashBoard:r.n(oe)()("/dashBoards/:boardName"),logout:"/logout"},ue=(r(82),function(e){function t(){return Object(Q.a)(this,t),Object(X.a)(this,Object(Y.a)(t).apply(this,arguments))}return Object(Z.a)(t,e),Object(V.a)(t,[{key:"render",value:function(){var e=this.props.user;return i.a.createElement("nav",{className:"nav"},i.a.createElement(ce.a,{to:se.dashBoards},"\u0414\u043e\u0441\u043a\u0438"),null===e&&i.a.createElement(ce.a,{to:se.homePage},"\u0412\u043e\u0439\u0442\u0438"),null!==e&&i.a.createElement(ce.a,{to:se.logout},"\u0412\u044b\u0439\u0442\u0438"))}}]),t}(u.Component));var ie=Object(m.b)(function(e){return{user:e.user.user}},Object(b.a)({},a))(ue),le=(r(84),r(41)),de=r.n(le),me=function(e){function t(e){var r;return Object(Q.a)(this,t),(r=Object(X.a)(this,Object(Y.a)(t).call(this,e))).onInputChange=function(e){r.setState({mail:e.target.value})},r.responseGoogleSuccess=function(e){r.setState({mail:e.profileObj.email})},r.responseGoogleError=function(e){console.log(e)},r.handleLogin=function(e){e.preventDefault();var t={mail:r.mailRef.current.value,password:r.passwordRef.current.value};(0,r.props.userLogin)(t).then(function(e){"error"===e.type&&r.setState({error:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a"})})},r.mailRef=i.a.createRef(),r.passwordRef=i.a.createRef(),r.state={mail:"",error:""},r}return Object(Z.a)(t,e),Object(V.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"homepage-container"},i.a.createElement(ie,null),i.a.createElement("div",{className:"homepage-content"},i.a.createElement("h1",null,"\u0412\u0445\u043e\u0434 \u0432 Trello Clone"),i.a.createElement(ce.a,{to:se.register},"\u0418\u043b\u0438 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"),i.a.createElement("div",{className:"homepage-form"},i.a.createElement("label",{for:"homepage-form-mail"},"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0430\u044f \u043f\u043e\u0447\u0442\u0430"),i.a.createElement("input",{type:"text",id:"homepage-form-mail",value:this.state.mail||"",onChange:this.onInputChange,ref:this.mailRef}),i.a.createElement("label",{for:"homepage-form-password"},"\u041f\u0430\u0440\u043e\u043b\u044c"),i.a.createElement("input",{type:"password",id:"homepage-form-password",ref:this.passwordRef}),i.a.createElement("button",{onClick:this.handleLogin},"\u0412\u043e\u0439\u0442\u0438"),i.a.createElement(de.a,{clientId:"771756670044-prlc2epkdq1ficlpdcrqhv1sbbfj2m7m.apps.googleusercontent.com",buttonText:"LOGIN WITH GOOGLE",onSuccess:this.responseGoogleSuccess,onFailure:this.responseGoogleError}),i.a.createElement("div",{className:"homepage-form-error"},this.state.error||""))))}}]),t}(u.Component),pe=Object(m.b)(null,Object(b.a)({},a))(me),fe=(r(89),function(e){function t(e){var r;return Object(Q.a)(this,t),(r=Object(X.a)(this,Object(Y.a)(t).call(this,e)))._isMounted=!1,r.createButton=function(){r._isMounted=!0;var e={name:r.nameRef.current.value,mail:r.mailRef.current.value,password:r.passwordRef.current.value};(0,r.props.userCreate)(e).then(function(e){e.type&&"error"===e.type&&!0===r._isMounted&&r.setState({error:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a"})})},r.nameRef=i.a.createRef(),r.mailRef=i.a.createRef(),r.passwordRef=i.a.createRef(),r}return Object(Z.a)(t,e),Object(V.a)(t,[{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){return i.a.createElement("div",{className:"register-container"},i.a.createElement(ie,null),i.a.createElement("h1",null,"Register"),i.a.createElement("div",{className:"register-form"},i.a.createElement("label",{for:"register-form-register"},"\u0418\u043c\u044f"),i.a.createElement("input",{type:"text",id:"homepage-form-name",required:!0,ref:this.nameRef}),i.a.createElement("label",{for:"register-form-register"},"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0430\u044f \u043f\u043e\u0447\u0442\u0430"),i.a.createElement("input",{type:"text",id:"homepage-form-mail",required:!0,ref:this.mailRef}),i.a.createElement("label",{for:"register-form-mail"},"\u041f\u0430\u0440\u043e\u043b\u044c"),i.a.createElement("input",{type:"password",id:"register-form-password",required:!0,ref:this.passwordRef}),i.a.createElement("button",{onClick:this.createButton},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u043e\u0432\u044b\u0445 \u0430\u043a\u043a\u0430\u0443\u043d\u0442"),i.a.createElement(ce.a,{to:"/"},"\u041d\u0430\u0437\u0430\u0434")))}}]),t}(u.Component)),he=Object(m.b)(null,Object(b.a)({},a))(fe),be=(r(91),function(e){function t(){var e,r;Object(Q.a)(this,t);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return(r=Object(X.a)(this,(e=Object(Y.a)(t)).call.apply(e,[this].concat(n))))._isMounted=!1,r.state={error:""},r.onCreateClick=function(){var e=window.prompt("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f \u0434\u043e\u0441\u043a\u0438");if(""===e)for(;""===e;)e=window.prompt("\u0418\u043c\u044f \u0434\u043e\u0441\u043a\u0438 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u043e\u0439 \u0441\u0442\u0440\u043e\u043a\u043e\u0439. \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f \u0434\u043e\u0441\u043a\u0438");var t={title:e};(0,r.props.createBoard)(t)},r.onRemoveClick=function(e){(0,r.props.removeBoard)(e)},r}return Object(Z.a)(t,e),Object(V.a)(t,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0;var t=this.props,r=t.getAllBoards;null==t.boards&&r().then(function(t){void 0!==t&&void 0!==t.type&&"error"===t.type&&!0===e._isMounted&&e.setState({error:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0434\u043e\u0441\u043a\u0438"})})}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this,t=this.props.boards;return i.a.createElement("div",{className:"dashboards-container"},i.a.createElement("div",{className:"dashboards-content"},i.a.createElement("h1",null,"\u0414\u043e\u0441\u043a\u0438"),i.a.createElement("div",{className:"dashboards-items"},null===t&&i.a.createElement("p",null,"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."),null!==t&&t.map(function(t,r){return null!==t.title&&void 0!==t.title&&i.a.createElement("div",{className:"dashboards-item",key:r},i.a.createElement(ce.a,{to:"/dashBoards/".concat(t.title)},t.title),i.a.createElement("span",{className:"dashboards-item-close",onClick:e.onRemoveClick.bind(null,t._id)}))}),t===[]&&i.a.createElement("h2",null,"\u041d\u0435\u0442 \u0434\u043e\u0441\u043e\u043a")),i.a.createElement("button",{className:"dashboards-create",onClick:this.onCreateClick},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0434\u043e\u0441\u043a\u0443"),i.a.createElement("div",{className:"dashboards-error"},this.state.error||"")),i.a.createElement(ie,null))}}]),t}(u.Component));var ve=Object(m.b)(function(e){return{boards:e.boards.boards}},Object(b.a)({},n))(be),Oe=r(18),ge=Object(Oe.a)(),je=(r(93),function(e){function t(){var e,r;Object(Q.a)(this,t);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return(r=Object(X.a)(this,(e=Object(Y.a)(t)).call.apply(e,[this].concat(n))))._isMounted=!1,r.cardName=i.a.createRef(),r.cardItemName=i.a.createRef(),r.state={error:""},r.onCreateClick=function(){var e=r.props.createCard;if(""===r.cardName.current.value||null==r.cardName.current.value)return r.setState({error:"\u0418\u043c\u044f \u0441\u043f\u0438\u0441\u043a\u0430 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c"}),!1;r.setState({error:null}),e({boardTitle:ge.location.pathname,cardTitle:r.cardName.current.value}).then(function(e){void 0!==e&&void 0!==e.type&&"error"===e.type&&!0===r._isMounted&&r.setState({error:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a"}),r.cardName.current.value=""})},r.onCardCreateClick=function(e){(0,r.props.createCardItem)({boardTitle:ge.location.pathname,cardId:e,itemTitle:r.cardItemName.current.value}).then(function(e){void 0!==e&&void 0!==e.type&&"error"===e.type&&!0===r._isMounted&&r.setState({error:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a"}),r.cardItemName.current.value=""})},r.onCardItemRemove=function(e,t){(0,r.props.removeCardItem)({boardTitle:ge.location.pathname,cardId:e,itemId:t})},r}return Object(Z.a)(t,e),Object(V.a)(t,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0;var t=this.props,r=t.getAllCards;null==t.cards&&r().then(function(t){void 0!==t&&void 0!==t.type&&"error"===t.type&&!0===e._isMounted&&e.setState({error:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a"})})}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this,t=this.props.cards;return i.a.createElement("div",{className:"dashboard-container"},i.a.createElement("div",{className:"dashboard-content"},null!==t&&t.map(function(t,r){return null!==t.title&&i.a.createElement("div",{className:"dashboard-card",key:r},i.a.createElement("div",{className:"dashboard-card-wrapper"},i.a.createElement("div",{className:"dashboard-card-header"},t.title),i.a.createElement("div",{className:"dashboard-card-form"},i.a.createElement("input",{className:"dashboard-card-form-item-create",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442",ref:e.cardItemName}),i.a.createElement("button",{className:"dashboard-card-form-create-btn",onClick:e.onCardCreateClick.bind(null,t._id)},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),i.a.createElement("ul",{className:"dashboard-card-content"},t.items!==[]&&t.items.map(function(r,a){return i.a.createElement("div",{className:"dashboard-card-content-item",key:a},i.a.createElement("li",null,r.value),i.a.createElement("span",{className:"dashboard-card-content-remove",onClick:e.onCardItemRemove.bind(null,t._id,r._id)}))})))))}),i.a.createElement("div",{className:"dashboard-card-create"},i.a.createElement("div",{className:"dashboard-card-create-header"},i.a.createElement("div",{className:"dashboard-card-create-wrapper"},i.a.createElement("input",{placeholder:"\u0418\u043c\u044f",ref:this.cardName}))),i.a.createElement("button",{className:"dashboard-create",onClick:this.onCreateClick},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a"))),i.a.createElement("div",{className:"dashboards-error"},this.state.error||""),i.a.createElement(ce.a,{to:se.dashBoards},"\u041d\u0430\u0437\u0430\u0434"))}}]),t}(u.Component));var Ee=Object(m.b)(function(e){return{cards:e.cards.cards}},Object(b.a)({},c))(je);var ye=Object(m.b)(function(e){var t=e.user,r=e.boards;return{user:t.user,boards:r.boards}},Object(b.a)({},a,n))(function(e){var t=e.currentUserUnset,r=e.allBoardsUnset;return localStorage.clear(),t(),r(),ge.push(se.homePage),!0}),Ne=function(e){function t(){return Object(Q.a)(this,t),Object(X.a)(this,Object(Y.a)(t).apply(this,arguments))}return Object(Z.a)(t,e),Object(V.a)(t,[{key:"render",value:function(){return i.a.createElement("h1",null,"404. Page wasn't found")}}]),t}(u.Component),we=function(e){function t(){return Object(Q.a)(this,t),Object(X.a)(this,Object(Y.a)(t).apply(this,arguments))}return Object(Z.a)(t,e),Object(V.a)(t,[{key:"render",value:function(){var e=this.props,t=e.user,r=e.userStatus;return i.a.createElement("div",{className:"app-container"},i.a.createElement(ae.a,null,i.a.createElement(re,{exact:!0,path:se.homePage,state:null===t&&"pending"===r,to:se.dashBoards,component:pe}),i.a.createElement(re,{exact:!0,path:se.register,state:null===t&&"pending"===r,to:se.dashBoards,component:he}),i.a.createElement(re,{exact:!0,path:se.dashBoards,state:null!=t,to:se.homePage,component:ve}),i.a.createElement(re,{exact:!0,path:se.dashBoard,state:null!=t,to:se.homePage,component:Ee}),i.a.createElement(re,{exact:!0,path:se.logout,state:null!=t,to:se.homePage,component:ye}),i.a.createElement(ee.a,{component:Ne})))}}]),t}(u.Component);var Ce=Object(ne.a)(Object(m.b)(function(e){var t=e.user;return{user:t.user,userStatus:t.userStatus}},Object(b.a)({},a))(we)),Se=r(102);d.a.render(i.a.createElement(m.a,{store:K},i.a.createElement(Se.a,{history:ge},i.a.createElement(Ce,null))),document.getElementById("root"))}},[[44,2,1]]]);
//# sourceMappingURL=main.989f1259.chunk.js.map